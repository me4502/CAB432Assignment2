<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CAB432-Assignment2</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="ttps://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
          media="screen,projection"/>
</head>
<body>

<!-- Header -->
<nav>
    <div class="nav-wrapper">
        <a href="#" class="brand-logo">Twitter Feeling Timeline</a>
        <ul id="nav-mobile" class="right hide-on-med-and-down">
            <!-- TODO: {{current_username}} must be replaced by an actual username retrieved from Twitter APIs -->
            <li id="current-username">{{current_username}}</li>
        </ul>
    </div>
</nav>

<!-- Content -->
<div class="divider"></div>
<div class="section">

    <!-- User ID and Analyze Button Space -->
    <div class="row">
        <form method="POST" class="col s12">
            <div class="row">
                <div class="input-field col s6">
                    <i class="material-icons prefix">account_circle</i>
                    <input id="icon_prefix" type="text" class="validate">
                    <label for="icon_prefix">User ID</label>
                </div>
                <div class="input-field col s6">
                    <button class="btn waves-effect waves-light" type="submit" name="action" onclick="return isUserIdEmpty();">Analyze
                        <i class="material-icons right">search</i>
                    </button>
                </div>
            </div>
        </form>
    </div>

</div>
<div class="divider"></div>
<div class="section">

    <!-- Chart Space -->
    <div id="analysisChart"></div>
    <script>
        Plotly.d3.csv("https://raw.githubusercontent.com/plotly/datasets/master/finance-charts-apple.csv", function (err, rows) {
            function unpack(rows, key) {
                return rows.map(function (row) {
                    return row[key];
                });
            }

            var layout = {
                title: 'Twitter Feeling Timeline'
            };

            var positive = {
                type: "scatter",
                mode: "lines",
                name: 'positive',
                x: unpack(rows, 'Date'),
                y: unpack(rows, 'AAPL.High'),
                line: {color: '#2be6ff'}
            };

            var neutral = {
                type: "scatter",
                mode: "lines",
                name: 'neutral',
                x: unpack(rows, 'Date'),
                y: unpack(rows, 'AAPL.Low'),
                line: {color: '#39ff2b'}
            };

            var negative = {
                type: "scatter",
                mode: "lines",
                name: 'negative',
                x: unpack(rows, 'Date'),
                y: unpack(rows, 'AAPL.Low'),
                line: {color: '#ff2b2b'}
            };

            var analysisData = [positive, neutral, negative];

            Plotly.newPlot('analysisChart', analysisData, layout);

        })
    </script>
</div>

<!-- Footer -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="../js/project.js" type="text/javascript"></script>
</body>
</html>